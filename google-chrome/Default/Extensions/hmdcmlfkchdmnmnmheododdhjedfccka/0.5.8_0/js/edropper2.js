(()=>{"use strict";var e={382:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createNode=void 0,t.createNode=function(e,t){const o=document.createElement(e);for(let e in t)o.setAttribute(e,t[e]);return o}},531:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=o(382);class r{constructor(){}hookColor(e){this.color=e.color,this.x=e.x,this.y=e.y}hookDeactivate(e){this.el.remove()}hookShow(e){this.el.style.display=""}hookHide(e){this.el.style.display="none"}}class i extends r{constructor(){super(),this.el=n.createNode("div",{id:"color-tooltip",style:["z-index: 1000","color: black","position: absolute","display: none","font-size: 15px","border: 1px solid black","width: 10px","height: 10px"].join(";")})}hookColor(e){super.hookColor(e);const t=Math.round(document.documentElement.scrollTop),o=Math.round(document.documentElement.scrollLeft);let n=e.y-t>e.screenHeight/2?-15:20,r=e.x-o<e.screenWidth/2?15:-30;this.el.style.backgroundColor=`#${e.color.rgbhex}`,this.el.style.borderColor=`#${e.color.opposite}`,this.el.style.top=`${e.y+n}px`,this.el.style.left=`${e.x+r}px`}}class s extends r{constructor(){super(),this.el=n.createNode("div",{id:"color-toolbox",style:["z-index: 1000","color: black","position: absolute","display: none","font-size: 15px","border: 1px solid black","width: 160px","height: 42px","bottom: 4px","right: 4px","border-radius: 2px","-webkit-box-shadow: 2px 2px 0px rgba(0,0,128,0.25)","background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#0f0f0f), to(#3f3f3f))","color: white","font-family: monospace","border: 1px solid transparent","position: fixed"].join(";")}),this.elColor=n.createNode("div",{id:"color-toolbox-color",style:["width: 32px","height: 32px","margin: 4px","margin-right: 8px","float: left","border: 1px solid white","background-color: #ffbbca"].join(";")}),this.elText=n.createNode("div",{id:"color-toolbox-text",style:["font-size: 11px","padding: 5px 0px","overflow: hidden","text-align: center","color: white"].join(";")}),this.el.append(this.elColor),this.el.append(this.elText)}hookColor(e){super.hookColor(e);this.elText.innerHTML=`#${this.color.rgbhex}<br/>rgb(${this.color.r},${this.color.g},${this.color.b})`,this.elColor.style.backgroundColor=`#${this.color.rgbhex}`}}t.default=class{constructor(e){this.tools=[],this.cursor=e.cursor,e.enableToolbox&&(this._toolbox=new s,this.tools.push(this._toolbox)),e.enableTooltip&&(this._tooltip=new i,this.tools.push(this._tooltip)),this.el=n.createNode("div",{id:"eye-dropper-overlay",style:["position: absolute",`width: ${e.width}px`,`height: ${e.height}px`,"opacity: 1","background: none","border: none","z-index: 5000"].join(";")});for(let e of this.tools)this.el.append(e.el);document.body.prepend(this.el)}hook(e,t){for(let o of this.tools)o[e](t)}screenshoting(e){e?(this.hook("hookHide",{}),this.el.style.cursor="progress"):(this.hook("hookShow",{}),this.el.style.cursor=this.cursor)}resized(e){this.el.style.width=`${e.width}px`,this.el.style.height=`${e.height}px`}deactivate(){this.hook("hookDeactivate",{}),this.el.remove()}tooltip(e){this.hook("hookColor",e)}}},752:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class o{constructor(e,t,o,n){this.left=e,this.top=t,this.right=e+o,this.bottom=t+n,this.width=o,this.height=n}transposed(){return new o(this.top,this.left,this.height,this.width)}contains(e){return e.left>=this.left&&e.right<=this.right&&e.top>=this.top&&e.bottom<=this.bottom}horizontalMerge(e){const t=this.transposed(),o=e.transposed(),n=t.verticalMerge(o);return null===n?null:n.transposed()}verticalMerge(e){let t=this,n=e;return this.top>e.top&&([t,n]=[n,t]),t.bottom>=n.top&&t.bottom<=n.bottom?new o(t.left,t.top,t.right-t.left,n.bottom-t.top):null}merge(e){return this.left==e.left&&this.right==e.right?this.verticalMerge(e):this.top==e.top&&this.bottom==e.bottom?this.horizontalMerge(e):null}toString(){return`Rect(${this.width}x${this.height})@${this.left},${this.top}`}}t.default=o},689:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t="start"){if(!e||"function"!=typeof e)return;let o,n=function(t){window.clearTimeout(o),o=setTimeout((function(){e()}),250)};"start"==t?window.addEventListener("scroll",n,!1):window.removeEventListener("scroll",n,!1)}},862:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const o={all_shortcuts:{},add:function(e,t,o={}){const n={type:"keydown",propagate:!1,disable_in_input:!1,target:document,keycode:void 0};let r=(o=Object.assign({},n,o)).target;"string"==typeof o.target&&(r=document.getElementById(o.target)),e=e.toLowerCase();let i=function(n){if(n=n||window.event,o.disable_in_input){let e;if(n.target?e=n.target:n.srcElement&&(e=n.srcElement),3==e.nodeType&&(e=e.parentNode),"INPUT"==e.tagName||"TEXTAREA"==e.tagName)return}let r;n.keyCode?r=n.keyCode:n.which&&(r=n.which);let i=String.fromCharCode(r).toLowerCase();188==r&&(i=","),190==r&&(i=".");let s=e.split("+"),a=0,c={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},l={esc:27,escape:27,tab:9,space:32,return:13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,break:19,insert:45,home:36,delete:46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},d={shift:{wanted:!1,pressed:!1},ctrl:{wanted:!1,pressed:!1},alt:{wanted:!1,pressed:!1},meta:{wanted:!1,pressed:!1}};n.ctrlKey&&(d.ctrl.pressed=!0),n.shiftKey&&(d.shift.pressed=!0),n.altKey&&(d.alt.pressed=!0),n.metaKey&&(d.meta.pressed=!0);for(let e of s)"ctrl"==e||"control"==e?(a++,d.ctrl.wanted=!0):"shift"==e?(a++,d.shift.wanted=!0):"alt"==e?(a++,d.alt.wanted=!0):"meta"==e?(a++,d.meta.wanted=!0):e.length>1?l[e]==r&&a++:o.keycode?o.keycode==r&&a++:i==e?a++:c[i]&&n.shiftKey&&(i=c[i],i==e&&a++);if(a==s.length&&d.ctrl.pressed==d.ctrl.wanted&&d.shift.pressed==d.shift.wanted&&d.alt.pressed==d.alt.wanted&&d.meta.pressed==d.meta.wanted&&(t(n),!o.propagate))return n.cancelBubble=!0,n.returnValue=!1,n.stopPropagation&&(n.stopPropagation(),n.preventDefault()),!1};this.all_shortcuts[e]={callback:i,target:r,event:o.type},r.addEventListener?r.addEventListener(o.type,i,!1):r.attachEvent?r.attachEvent("on"+o.type,i):r["on"+o.type]=i},remove:function(e){e=e.toLowerCase();let t=this.all_shortcuts[e];if(delete this.all_shortcuts[e],!t)return;let o=t.event,n=t.target,r=t.callback;n.detachEvent?n.detachEvent("on"+o,r):n.removeEventListener?n.removeEventListener(o,r,!1):n["on"+o]=!1}};t.default=o}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}(()=>{const e=o(862),t=o(689),n=o(531),r=o(752);var i=32747,s={width:0,height:0,screenWidth:0,screenHeight:0,xOffset:0,yOffset:0,overlay:null,options:{cursor:"default",enableColorToolbox:!0,enableColorTooltip:!0,enableRightClickDeactivate:!0},canvas:null,canvasData:null,canvasContext:null,canvasBorders:20,imageData:null,resetCanvas:!0,rects:[],screenshoting:!1,dropperActivated:!1,defaults:function(){s.screenWidth=window.innerWidth,s.screenHeight=window.innerHeight,s.canvas=document.createElement("canvas"),s.resetCanvas=!0,s.rects=[],s.screenshoting=!1,s.width=Math.round(document.documentElement.scrollWidth),s.height=Math.round(document.documentElement.scrollHeight),s.width>i&&(s.width=i),s.height>i&&(s.height=i)},messageListener:function(){chrome.runtime.onMessage.addListener((function(e,t,o){switch(e.type){case"edropper-version":o({version:12,tabid:e.tabid});break;case"pickup-activate":s.options=e.options,s.dropperActivate();break;case"pickup-deactivate":s.dropperDeactivate();break;case"update-image":s.imageData=e.data,s.capture()}}))},sendMessage:function(e){chrome.runtime.connect().postMessage(e)},dropperActivate:function(){s.dropperActivated||(s.defaults(),s.overlay=new n.default({width:s.width,height:s.height,enableToolbox:s.options.enableColorToolbox,enableTooltip:s.options.enableColorTooltip,cursor:s.options.cursor}),s.dropperActivated=!0,s.screenChanged(),t.default(s.onScrollStop),document.addEventListener("mousemove",s.onMouseMove,!1),document.addEventListener("click",s.onMouseClick,!1),!0===s.options.enableRightClickDeactivate&&document.addEventListener("contextmenu",s.onContextMenu,!1),s.shortcuts(!0))},dropperDeactivate:function(){s.dropperActivated&&(s.shortcuts(!1),s.dropperActivated=!1,document.removeEventListener("mousemove",s.onMouseMove,!1),document.removeEventListener("click",s.onMouseClick,!1),!0===s.options.enableRightClickDeactivate&&document.removeEventListener("contextmenu",s.onContextMenu,!1),t.default(s.onScrollStop,"stop"),s.overlay.deactivate())},onMouseMove:function(e){s.dropperActivated&&s.tooltip(e)},onMouseClick:function(e){if(!s.dropperActivated)return;e.preventDefault(),s.dropperDeactivate();const t=e.pageX,o=e.pageY,n=s.pickColor(t,o);s.sendMessage({type:"set-color",color:n})},onScrollStop:function(){s.dropperActivated&&s.screenChanged()},onScrollStart:function(){s.dropperActivated},shortcuts:function(t){1==t?(e.default.add("Esc",(function(e){s.dropperDeactivate()})),e.default.add("U",(function(e){s.screenChanged(!0)}))):(e.default.remove("U"),e.default.remove("Esc"))},onContextMenu:function(e){s.dropperActivated&&(e.preventDefault(),s.dropperDeactivate())},onWindowResize:function(){s.dropperActivated&&(s.defaults(),s.screenChanged(),s.overlay.resized({width:s.width,height:s.height}))},tooltip:function(e){if(!s.dropperActivated||s.screenshoting)return;const t=e.pageX,o=e.pageY,n=s.pickColor(t,o);s.overlay.tooltip({screenWidth:s.screenWidth,screenHeight:s.screenHeight,x:t,y:o,color:n})},pickColor:function(e,t){const o=Math.round(e),n=Math.round(t);if(null===s.canvasData)return;const r=n*s.canvas.width*4+4*o;let i={r:s.canvasData[r],g:s.canvasData[r+1],b:s.canvasData[r+2],alpha:s.canvasData[r+3]};return i.rgbhex=s.rgbToHex(i.r,i.g,i.b),i.opposite=s.rgbToHex(255-i.r,255-i.g,255-i.b),i},toHex:function(e){if(void 0===e)return"ff";for(var t=e.toString(16);t.length<2;)t="0"+t;return t},rgbToHex:function(e,t,o){return`${s.toHex(e)}${s.toHex(t)}${s.toHex(o)}`},checkCanvas:function(){const e=window.devicePixelRatio;(s.resetCanvas||s.canvas.width!=s.width||s.canvas.height!=s.height)&&(s.canvas=document.createElement("canvas"),s.canvas.width=s.width,s.canvas.height=s.height,s.canvasContext=s.canvas.getContext("2d"),s.canvasContext.scale(1/e,1/e),s.rects=[],s.resetCanvas=!1)},setScreenshoting:function(e){s.screenshoting&&e||(s.screenshoting=e,s.overlay.screenshoting(e))},screenChanged:function(e=!1){if(!s.dropperActivated)return;s.yOffset=Math.round(document.documentElement.scrollTop),s.xOffset=Math.round(document.documentElement.scrollLeft);const t=new r.default(s.xOffset,s.yOffset,s.screenWidth,s.screenHeight);if(!e&&s.rects.length>0)for(let e of s.rects)if(e.contains(t))return;s.setScreenshoting(!0),setTimeout((function(){s.sendMessage({type:"screenshot"})}),50)},updateRects:function(e){if(0===s.rects.length)return void s.rects.push(e);let t=!1;s.rects.forEach(((o,n)=>{let r=e.merge(o);null!==r&&(t=!0,s.rects.splice(n,1),s.updateRects(r))})),t||s.rects.push(e)},capture:function(){s.checkCanvas();var e=document.createElement("img");e.onload=function(){const t=new r.default(s.xOffset,s.yOffset,Math.round(e.width/window.devicePixelRatio),Math.round(e.height/window.devicePixelRatio));s.updateRects(t);const o=window.devicePixelRatio,n=s.xOffset*o,i=s.yOffset*o;s.canvasContext.drawImage(e,n,i),s.canvasData=s.canvasContext.getImageData(0,0,s.canvas.width,s.canvas.height).data,s.setScreenshoting(!1)},s.imageData&&(e.src=s.imageData)},init:function(){s.messageListener(),window.onresize=function(){s.onWindowResize()};const e=`(resolution: ${window.devicePixelRatio}dppx)`;matchMedia(e).addListener(s.onWindowResize)}};s.init()})()})();